{% macro download(what, version, label = 'Download') %}
<div class="call-to-action-with-text">
    <a id="download-{{what}}-button" class="button call-to-action is-primary is-rounded is-large" href="https://github.com/stencila/{{what}}/releases">
        <div id="download-{{what}}-details">{{ label }}</div>
    </a>

    <div id="download-{{what}}-other" style="display: none" class="call-to-action-text">
        This is the desktop version for <span id="download-{{what}}-os"></span>.<br>
        For other versions please <a id="download-{{what}}-other-link" href="https://github.com/stencila/{{what}}/releases">go here</a>
    </div>

</div>
<script type="text/javascript">
    var os;
    var href;
    if (navigator.appVersion.indexOf('Win') != -1) {
        os = 'Windows';
        href = 'https://github.com/stencila/{{what}}/releases/download/v{{version}}/Stencila.Setup.{{version}}.exe';
    } else if (navigator.appVersion.indexOf('Mac') != -1) {
        os = 'MacOS';
        href = 'https://github.com/stencila/{{what}}/releases/download/v{{version}}/Stencila-{{version}}.dmg';
    } else if (navigator.appVersion.indexOf('Linux') != -1) {
        os = 'Linux';
        href = 'https://github.com/stencila/{{what}}/releases/download/v{{version}}/stencila-{{what}}-{{version}}-x86_64.AppImage';
    }

    if (os) {
        var button = document.querySelector('#download-{{what}}-button')
        button.href = href
        var osSpan = document.querySelector('#download-{{what}}-os')
        osSpan.innerText = os
        var other = document.querySelector('#download-{{what}}-other')
        other.setAttribute('style', '')
    }
</script>
{% endmacro %}